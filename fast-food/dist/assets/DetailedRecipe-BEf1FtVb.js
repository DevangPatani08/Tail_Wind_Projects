import{j as e,r as a,i as C,u as M,c as k,C as l,L as E,b as p,d as L,e as m}from"./index-DmDDhjXK.js";import{b as X}from"./api-CUGZEuPj.js";const B=()=>e.jsx("section",{className:"w-full flex flex-col items-center justify-start box-border px-6 md:px-10",children:e.jsx("div",{className:"w-full max-w-[90rem] pt-24 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-gray-400",children:"Loading recipe..."})})}),I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAT4AAACfCAMAAABX0UX9AAAAMFBMVEXa3+WqtcHDy9SrtsLX3OOnsr/d4ufN1NvZ3uS6w83BydLHzte1vsnK0dnU2uCyvMe7TYF6AAACPklEQVR4nO3b3Y6DIBCGYZEyVqV6/3e7W9M/YdyCbEKM73O42QP6BRg60KYBAAAAAAAAAAAAAAAAAAAAAAAAAOCcRGqP4LCk6cZhGLuGCHe4DtYtbH+tPZbDkc448+DMjQmYRcZXeEuALfnl6Fbp/ebH/MtwtSbgLrXHdBwyuDA+0zP9kkXh/WL6pQp3vmX1jrVHdRTa2mX1JpNeW7ye+NIQXxEWb5kbpaPEVZt9U+1RHYa2+bH1pbvEa5fJly5ouNByyRQUX9fXHtDBrOafG5h7mWTybknQuXkivXwyjb33fUt4e4lwUwkA+D9UlQJys57bo92W66SOCbjPoyczkt8uM9+G95P+2VBwvvZYjuezHeNmGqmZpnUvlQKSJXx/5Sggqlun/tlHFyE0o2PinVZYtUt053n+HFhiivMT7Q7dGEsBWXlU1yi/SQuPAhJ6vvEL84ue7b4WMHeZb5NVY3mfl5X8KCBPn2eTj/yk3U7vfoKmgCxkdTZ5n+u0V7ufLLdyTbxEn/ltlo33f+onxVOJXrg8fhUj89f4jGH9Kkv0nt9fZePFnr4DrS5R18VzkvgUl42TXVJ6p49vc4NLSu/s8SVtcMS3IW2DIz6dfDsXE99fvp+LiW9b/Cto4ssQdeGJL0P8aw7iy7B1YCa+JMRXhPiKEF8R4itCfEWIr8g/fOkw9sTN+pS7jC/m2p+hotJu1f1OpPZnqEha48qc+6mzTG2JkVtyAAAAAAAAAAAAAAAAAAAAAAAAAACQ4AdPsBNFDJuCkgAAAABJRU5ErkJggg==",R=()=>{const[s,v]=a.useState(null),[h,n]=a.useState(!0),[g,b]=a.useState(!1),{id:o}=C(),i=M(),c=a.useRef(null),x=k(t=>t.cart.items.find(r=>r.id===o)),u=x?x.quantity:0;if(a.useEffect(()=>{(async()=>{try{const r=await X(o);v(r),n(!1)}catch(r){console.error("Error loading meal: ",r),n(!1)}finally{n(!1)}})()},[o]),a.useEffect(()=>{const t=()=>{if(c.current){const r=c.current.getBoundingClientRect(),N=window.innerHeight;b(r.bottom<=N)}};return window.addEventListener("scroll",t),t(),()=>window.removeEventListener("scroll",t)},[]),h)return e.jsx(B,{});if(!s)return e.jsx("section",{className:"w-full h-[100vh] flex flex-col items-center justify-start box-border px-6 md:px-10",children:e.jsxs("div",{className:"w-full max-w-[90rem] h-full pt-24 flex flex-col items-center justify-center box-border",children:[e.jsx(l,{variant:"h2",className:"w-full text-center text-[var(--color-n)] mb-10",children:"Meal Not Found"}),e.jsx(l,{variant:"l_l_m",children:e.jsx(E,{to:"/recipes",className:"w-fit rounded-lg px-6 py-2 bg-[var(--color-p)] text-[var(--color-bg-b)] ",children:"Go back"})})]})});const d=[];for(let t=0;t<=20;t++)s[`strIngredient${t}`]&&d.push({ingredient:s[`strIngredient${t}`],measure:s[`strMeasure${t}`]});const A=()=>{i(m.addItem({id:s.idMeal,name:s.strMeal,price:9.99,image:s.strMealThumb,category:s.strCategory}))},j=()=>{i(m.addItem({id:s.idMeal}))},w=()=>{i(m.removeItem(s.idMeal))},f=t=>!t||t.trim()===""?[]:t.split(",").map(r=>r.trim()).filter(r=>r!==""),y=t=>t?t.split(`\r
`).map(r=>r.trim()).filter(r=>r!==""):[];return e.jsxs("section",{className:"w-full flex flex-col items-center justify-start box-border px-6 md:px-10",ref:c,children:[e.jsxs("div",{className:"w-full h-fit max-w-[90rem] pt-24 flex flex-col items-center justify-start box-border pb-24",children:[e.jsxs("div",{className:"w-full h-[37.5rem] relative rounded-2xl overflow-hidden cursor-pointer group",children:[e.jsx("img",{src:s.strMealThumb||I,alt:s.strMeal,className:"w-full h-full object-cover group-hover:scale-105 transition-all duration-300 ease-in-out"}),e.jsxs("div",{className:"absolute inset-0 bg-[var(--color-n)]/25 flex flex-col items-center justify-end p-10 gap-4 group-hover:bg-[var(--color-n)]/50 transition-all duration-300 ease-in-out",children:[e.jsx(l,{variant:"h1",className:"w-full text-left text-[var(--color-bg-b)]",children:s.strMeal}),f(s.strTags).length>0&&e.jsxs("div",{className:"w-full h-fit flex flex-wrap gap-4 items-center justify-start",children:[e.jsx(l,{variant:"p_b",className:"w-fit py-2 px-4 text-center bg-[var(--color-bg-d)] text-[var(--color-n-m)] rounded-lg",children:s.strCategory}),e.jsx(l,{variant:"p_b",className:"w-fit py-2 px-4 text-center bg-[var(--color-bg-d)] text-[var(--color-n-m)] rounded-lg",children:s.strArea}),f(s.strTags).map((t,r)=>e.jsx(l,{variant:"p_b",className:"w-fit py-2 px-4 text-center bg-[var(--color-bg-d)] text-[var(--color-n-m)] rounded-lg",children:t},r)),e.jsxs(l,{variant:"p_b",className:"w-fit py-2 px-4 text-center bg-[var(--color-bg-d)] text-[var(--color-n-m)] rounded-lg",children:[d.length," Ingredients"]})]})]})]}),e.jsxs("div",{className:"my-10 w-full h-fit flex flex-col gap-6 md:gap-8 items-start justify-start",children:[e.jsx(l,{variant:"h2",className:"w-full text-left text-[var(--color-n)]",children:"Ingredients"}),e.jsx("div",{className:"w-full h-fit flex flex-wrap gap-4 px-6",children:d.map((t,r)=>e.jsxs(l,{variant:"p_m",className:"w-fit h-fit flex flex-row gap-2 px-6 py-4 rounded-full bg-[var(--color-bg-d)] text-[var(--color-n-m)] hover:bg-[var(--color-s)] hover:text-[var(--color-bg-b)] transition-all duration-300 ease-in-out cursor-pointer",children:[e.jsx("span",{children:t.ingredient}),e.jsxs("span",{children:["(",t.measure,")"]})]},r))})]}),e.jsx("div",{className:"w-full h-fit flex flex-col gap-6 md:gap-8 items-start justify-start",children:s.strInstructions&&e.jsxs("div",{className:"w-full mt-8",children:[e.jsx(l,{variant:"h2",className:"mb-6 text-[var(--color-n)] text-left w-full",children:"Cooking Instructions"}),e.jsx("div",{className:"space-y-5 px-4",children:y(s.strInstructions).map((t,r)=>e.jsxs("div",{className:"flex gap-4 items-start justify-start md:items-center",children:[e.jsx(l,{variant:"l_l_m",className:"flex-shrink-0 w-10 h-10 bg-[var(--color-p)] text-white rounded-full flex items-center justify-center",children:r+1}),e.jsx(l,{variant:"l_l_m",className:"text-[var(--color-n-m)] leading-relaxed flex-1",children:t})]},r))})]})})]}),e.jsx("div",{className:`w-full max-w-[90rem] h-fit p-6 rounded-lg bg-[var(--color-bg-b)] shadow-lg ${g?"relative -mt-24":"fixed bottom-0 z-50"}`,children:e.jsxs("div",{className:"flex justify-between items-center gap-2 lg:gap-6",children:[e.jsx(l,{variant:"h4",className:"w-4/6 text-[var(--color-n)",asChild:!0,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"w-3/6 lg:w-fit lg:max-w-4/6 truncate",children:s.strMeal}),e.jsx("span",{className:"w-fit",children:" - "}),e.jsx("span",{className:"w-fit text-[var(--color-p)]",children:"$9.99"})]})}),u===0?e.jsx("div",{className:"w-2/6 lg:w-1/6 h-fit flex gap-0 items-center justify-end",children:e.jsx("button",{type:"button",className:"p-2 flex items-center justify-center text-[var(--color-bg-b)] rounded-md border-1 border-[var(--color-s)] bg-[var(--color-s)] hover:border-[var(--color-p)] hover:bg-[var(--color-p)] transition-all duration-300 ease-in-out  cursor-pointer",onClick:A,children:e.jsx(p,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}):e.jsxs("div",{className:"w-2/6 lg:w-1/6 h-full flex gap-0 items-center justify-end",children:[e.jsx("button",{type:"button",className:"p-2 flex items-center justify-center text-[var(--color-n-m)] rounded-md border-1 border-[var(--color-n-m)] bg-[var(--color-bg-b)] hover:border-[var(--color-p)] hover:bg-[var(--color-p)] hover:text-[var(--color-bg-b)] transition-all duration-300 ease-in-out  cursor-pointer",onClick:w,children:e.jsx(L,{className:"w-6 h-6 lg:w-8 lg:h-8"})}),e.jsx(l,{variant:"p_L_m",className:"w-full text-center text-[var(--color-n-m)] flex items-center justify-center",children:e.jsx("span",{className:"w-full h-full",children:u})}),e.jsx("button",{type:"button",className:"p-2 flex items-center justify-center text-[var(--color-bg-b)] rounded-md border-1 border-[var(--color-s)] bg-[var(--color-s)] hover:border-[var(--color-p)] hover:bg-[var(--color-p)] transition-all duration-300 ease-in-out  cursor-pointer",onClick:j,children:e.jsx(p,{className:"w-6 h-6 lg:w-8 lg:h-8"})})]})]})})]})};export{R as default};
