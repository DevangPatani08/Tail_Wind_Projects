import{u as y,c as w,j as e,C as s,b as p,d as C,e as g,r as o,f as N,L as M,g as _}from"./index-DmDDhjXK.js";import{f as k,a as T}from"./api-CUGZEuPj.js";const L=({meal:t})=>{const c=y(),n=w(h=>h.cart.items.find(x=>x.id===t.idMeal)),u=n?n.quantity:0,a=()=>{c(g.addItem({id:t.idMeal,name:t.strMeal,price:9.99,image:t.strMealThumb,category:t.strCategory}))},i=()=>{c(g.addItem({id:t.idMeal}))},f=()=>{c(g.removeItem(t.idMeal))};return e.jsxs("div",{className:"col-span-1 h-100 overflow-hidden bg-[var(--color-bg-b)] rounded-lg flex flex-col group hover:-translate-y-2 hover:shadow-lg transition-all duration-300 ease-in-out",children:[e.jsx("div",{className:"relative overflow-hidden h-3/5 w-full",children:e.jsx("img",{src:t.strMealThumb,alt:t.strMeal,className:"absolute w-full h-full group-hover:scale-[1.15] transition-all duration-[0.4s] ease-linear"})}),e.jsxs("div",{className:"w-full h-2/5 p-6 flex flex-col items-start justify-between",children:[e.jsx(s,{variant:"h6",className:"text-left text-[var(--color-n)] mb-2",children:e.jsx("span",{className:"line-clamp-1",children:t.strMeal})}),e.jsxs("div",{className:"w-full flex gap-6 items-center justify-between",children:[e.jsx(s,{variant:"h4",className:"text-left text-red-500",children:"$9.99"}),u===0?e.jsx("div",{className:"w-full h-fit flex gap-0 items-center justify-end",children:e.jsx("button",{type:"button",className:"p-2 flex items-center justify-center text-[var(--color-bg-b)] rounded-md border-1 border-[var(--color-s)] bg-[var(--color-s)] hover:border-[var(--color-p)] hover:bg-[var(--color-p)] transition-all duration-300 ease-in-out  cursor-pointer",onClick:a,children:e.jsx(p,{size:24})})}):e.jsxs("div",{className:"w-full h-full flex gap-0 items-center justify-end",children:[e.jsx("button",{type:"button",className:"p-2 flex items-center justify-center text-[var(--color-n-m)] rounded-md border-1 border-[var(--color-n-m)] bg-[var(--color-bg-b)] hover:border-[var(--color-p)] hover:bg-[var(--color-p)] hover:text-[var(--color-bg-b)] transition-all duration-300 ease-in-out  cursor-pointer",onClick:f,children:e.jsx(C,{size:24})}),e.jsx(s,{variant:"p_L_m",className:"w-full text-center text-[var(--color-n-m)] flex items-center justify-center",children:e.jsx("span",{className:"w-full h-full",children:u})}),e.jsx("button",{type:"button",className:"p-2 flex items-center justify-center text-[var(--color-bg-b)] rounded-md border-1 border-[var(--color-s)] bg-[var(--color-s)] hover:border-[var(--color-p)] hover:bg-[var(--color-p)] transition-all duration-300 ease-in-out  cursor-pointer",onClick:i,children:e.jsx(p,{size:24})})]})]})]})]})},I=()=>{const[t,c]=o.useState([]),[n,u]=o.useState([]),[a,i]=o.useState(""),f=o.useRef(null),h=o.useRef(null),x=N();return o.useEffect(()=>{(async()=>{const m=await k(),b=m.find(l=>l.strCategory==="Miscellaneous"),d=[...m.filter(l=>l.strCategory!=="Miscellaneous").sort((l,j)=>l.strCategory.localeCompare(j.strCategory))];b&&d.push(b),c(d);const v=new URLSearchParams(x.search).get("category");v&&d.some(l=>l.strCategory===v)?i(v):d.length>0&&i(d[0].strCategory)})()},[x.search]),o.useEffect(()=>{(async()=>{if(a){const m=await T(a);u(m)}})()},[a]),e.jsx("section",{className:"w-full flex flex-col items-center justify-start box-border px-6 md:px-10",children:e.jsxs("div",{className:"w-full max-w-[90rem] pt-24 flex flex-col items-center justify-start box-border",children:[e.jsx("div",{className:"w-full flex items-center justify-start box-border mb-4",children:e.jsx(s,{variant:"l_c_m",asChild:!0,children:e.jsxs(M,{to:"/",onClick:()=>{window.scrollTo(0,0)},className:"w-fit px-8 lg:px-10 py-3 text-[var(--color-n-m)] hover:text-[var(--color-p)] flex items-center justify-center gap-2 transition-all duration-300 ease-linear cursor-pointer capitalize",children:[e.jsx(_,{className:"w-5 h-5 lg:w-6 lg:h-6"}),e.jsx("span",{children:"Back to home"})]})})}),e.jsxs("div",{className:"w-full flex flex-col items-center justify-start box-border mb-10",children:[e.jsxs(s,{variant:"h2",className:"w-full text-[var(--color-n)] text-center mb-2",children:["Our ",e.jsx("span",{className:"text-[var(--color-s)]",children:"Menu"})]}),e.jsx(s,{variant:"p_m",className:"w-full text-center text-[var(--color-n-m)]",children:"Discover delicious meals from every category"})]}),e.jsx("div",{ref:f,className:"w-full flex flex-wrap items-center justify-center gap-2 mb-8 lg:mb-12",children:t.map(r=>e.jsx(s,{variant:"p_m",className:"text-center w-fit text-[var(--color-n)]",children:e.jsx("button",{type:"button",onClick:()=>i(r.strCategory),className:`px-4 py-2 rounded-lg transition-all duration-300 ${a===r.strCategory?"bg-[var(--color-p)] text-[var(--color-bg-b)] shadow-md":"bg-transparent text-[var(--color-n)] hover:bg-[var(--color-s)]"}`,children:r.strCategory})},r.strCategory))}),e.jsxs("div",{className:"w-full flex items-center justify-between mb-6",children:[e.jsx(s,{variant:"h3",className:"text-left w-full text-[var(--color-n)]",children:a}),e.jsxs(s,{variant:"l_c_b",className:"w-full text-right text-[var(--color-n-m)]",children:[n.length," items"]})]}),e.jsx("ul",{ref:h,className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 items-start justify-start w-full",children:n.map(r=>e.jsx("li",{className:"food-card",children:e.jsx(L,{meal:r})},r.idMeal))})]})})};export{I as default};
